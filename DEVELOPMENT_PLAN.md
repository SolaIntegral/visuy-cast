# Visuy Cast - 開発計画

## 技術スタック

### フロントエンド
- **Next.js (React)**: 高性能なWebアプリケーション構築
- **TypeScript**: 型安全性と開発効率の向上
- **HTML/CSS**: マークアップとスタイリング
- **Firebase Hosting**: デプロイとホスティング

### バックエンド・インフラ
- **Firebase**: 一気通貫のサービス提供
  - **Authentication**: ユーザー認証
  - **Firestore**: データベース
  - **Firebase Hosting**: ホスティング
  - **Firebase Functions**: サーバーサイド処理（必要に応じて）

### 開発環境
- **Node.js**: 開発環境
- **npm/yarn**: パッケージ管理
- **Git**: バージョン管理

## 開発フェーズ

### フェーズ1: 基盤構築とコア体験の実装
**期間**: 第1回〜第2回（3時間 + 90分）

#### 目標
ログインし、4象限UIで予定と負荷を登録できるプロトタイプを完成させる

#### 実装項目
- [ ] プロジェクト環境構築
  - [ ] Next.jsプロジェクトの初期化
  - [ ] Firebase設定と接続
  - [ ] TypeScript設定
- [ ] 認証機能
  - [ ] Firebase Authentication設定
  - [ ] ログイン・サインアップ画面
  - [ ] 認証状態管理
- [ ] 4象限マッピングUI
  - [ ] インタラクティブな円形マップ
  - [ ] ドラッグ&ドロップによる負荷設定
  - [ ] 感情軸（ポジティブ/ネガティブ）
  - [ ] 活動軸（インプット/アウトプット）
- [ ] 基本的な予定登録機能
  - [ ] 予定の入力フォーム
  - [ ] 負荷データの保存
  - [ ] Firestoreへのデータ保存

#### マイルストーン
**第2回終了時**: 4象限マッピングUIで予定の負荷を登録できるプロトタイプ完成

### フェーズ2: 機能の拡張と価値の可視化
**期間**: 第3回〜第4回（3時間 + 3時間）

#### 実装項目
- [ ] 天気予報機能
  - [ ] 負荷データに基づく天気予報アルゴリズム
  - [ ] 天気アイコンの表示（☀️☁️⛈️）
  - [ ] カレンダーでの天気予報表示
- [ ] AIスケジューリング提案
  - [ ] タスクの準備期間計算
  - [ ] キャパシティ分析アルゴリズム
  - [ ] 最適実行日の提案機能
- [ ] 分析機能
  - [ ] 気圧変動グラフ
  - [ ] ストレスパターン分析
  - [ ] 分析レポート生成
- [ ] プロフィール機能
  - [ ] 現在のキャパシティ状況表示
  - [ ] 天気予報カレンダーの共有
  - [ ] プロフィール設定

#### マイルストーン
**第4回終了時**: 全機能の基本実装完了

### フェーズ3: 最終調整とリリース
**期間**: 第5回（90分）

#### 実装項目
- [ ] 総合テスト
  - [ ] 全機能の動作確認
  - [ ] ユーザビリティテスト
  - [ ] パフォーマンス最適化
- [ ] リファイン
  - [ ] UI/UXの微調整
  - [ ] バグ修正
  - [ ] レスポンシブ対応
- [ ] デプロイ
  - [ ] Firebase Hosting設定
  - [ ] 本番環境へのデプロイ
  - [ ] ドメイン設定（必要に応じて）

#### マイルストーン
**第5回終了時**: サービス公開完了

## 開発の優先順位

### 最優先（MVP必須）
1. **4象限マッピングUI**: サービスの核となる機能
2. **天気予報表示**: 差別化要素
3. **基本的な予定管理**: 最低限の機能性

### 高優先
4. **AIスケジューリング提案**: 価値提供の核心
5. **分析機能**: ユーザーの自己理解支援
6. **プロフィール・共有機能**: コミュニケーション支援

### 中優先
7. **UI/UXの洗練**: ユーザビリティ向上
8. **パフォーマンス最適化**: 快適な利用体験

## 技術的な実装方針

### データ構造設計
```typescript
interface Schedule {
  id: string;
  title: string;
  date: Date;
  load: {
    emotional: number; // -1 to 1 (ネガティブ to ポジティブ)
    activity: number;  // -1 to 1 (インプット to アウトプット)
    intensity: number; // 0 to 1 (負荷の強さ)
  };
  preparationTasks?: Task[];
}

interface User {
  id: string;
  email: string;
  profile: {
    name: string;
    capacitySettings: {
      dailyCapacity: number;
      weeklyCapacity: number;
    };
  };
}
```

### 天気予報アルゴリズム
```typescript
function calculateWeatherForecast(schedules: Schedule[]): WeatherIcon {
  const totalLoad = schedules.reduce((sum, schedule) => {
    return sum + Math.abs(schedule.load.emotional) * schedule.load.intensity;
  }, 0);
  
  if (totalLoad < 0.3) return '☀️'; // 快晴
  if (totalLoad < 0.6) return '☁️'; // 曇り
  return '⛈️'; // 雷雨
}
```

### 4象限マッピングUI
- **Canvas API**または**SVG**を使用したインタラクティブな円形マップ
- **ドラッグ&ドロップ**による直感的な負荷設定
- **リアルタイムフィードバック**による操作感の向上

## 品質保証

### テスト戦略
- **ユニットテスト**: 重要なアルゴリズム（天気予報、キャパシティ計算）
- **統合テスト**: Firebase連携機能
- **E2Eテスト**: 主要なユーザーフロー

### パフォーマンス要件
- **初期表示**: 3秒以内
- **操作レスポンス**: 1秒以内
- **データ同期**: リアルタイム

### セキュリティ
- **認証**: Firebase Authentication
- **データ保護**: Firestoreのセキュリティルール
- **入力検証**: クライアント・サーバー両方での検証

## リリース後の拡張計画

### 短期（3ヶ月以内）
- モバイルアプリ化
- 通知機能の追加
- データエクスポート機能

### 中期（6ヶ月以内）
- グループ機能（友人とのスケジュール共有）
- AI分析の精度向上
- カスタム天気アイコンの追加

### 長期（1年以内）
- 医療機関との連携
- 研究データの収集・分析
- 企業向けソリューションの展開
